# ğŸ¯ SpeedyCRM - Claude Code Context & Standards

**Project:** SpeedyCRM - AI-First Credit Repair CRM
**Owner:** Christopher (Speedy Credit Repair - Est. 1995)
**Last Updated:** December 3, 2025
**Purpose:** Permanent context for Claude Code to maintain consistency

---

## ğŸ“‹ PROJECT OVERVIEW

### Business Context
- **Industry:** Credit Repair Services
- **Primary Users:** Christopher (owner), Laurie (operations), Jordan (IT support)
- **Client Base:** Credit repair clients, prospects, affiliates
- **Status:** 87% complete, ~40,000+ lines of production code
- **Deployed:** https://myclevercrm.com

### Technology Stack
- **Frontend:** React 18 + Vite
- **UI Framework:** Material-UI + Tailwind CSS (dark mode)
- **Icons:** Lucide-react
- **Backend:** Firebase (Firestore, Authentication, Cloud Functions)
- **Routing:** React Router v6
- **State:** React Context + useState/useEffect
- **Navigation:** Accordion-style sidebar (ProtectedLayout.jsx)

---

## ğŸ—ï¸ ARCHITECTURE STANDARDS

### Hub Architecture Pattern

**CRITICAL:** All major features are organized as "Hubs" - comprehensive feature containers with 6-12 tabs each.

#### Hub Structure Template:
```javascript
// src/pages/hubs/ExampleHub.jsx
import React, { useState } from 'react';
import { Tabs, Tab, TabPanel, Card } from '@mui/material';

const ExampleHub = () => {
  const [activeTab, setActiveTab] = useState(0);

  return (
    <div className="p-6">
      {/* Hub Header */}
      <div className="mb-6">
        <h1 className="text-3xl font-bold">Hub Name</h1>
        <p className="text-gray-600">Hub description</p>
      </div>

      {/* Tab Navigation */}
      <Tabs value={activeTab} onChange={(e, v) => setActiveTab(v)}>
        <Tab label="Tab 1" />
        <Tab label="Tab 2" />
        {/* 6-12 tabs total */}
      </Tabs>

      {/* Tab Panels */}
      <TabPanel value={activeTab} index={0}>
        {/* Full-featured component */}
      </TabPanel>
    </div>
  );
};

export default ExampleHub;
```

#### Hub Best Practices:
- âœ… 6-12 tabs per hub (not more)
- âœ… Each tab is a full-featured component
- âœ… Tabs can be 500-2,000 lines each
- âœ… Use Material-UI components
- âœ… Implement dark mode support
- âœ… Mobile-responsive design
- âœ… Role-based access control
- âœ… AI features integrated throughout
- âœ… Loading states for async operations
- âœ… Error boundaries
- âœ… Comprehensive comments with ===== headers

---

## ğŸ¨ CODE QUALITY STANDARDS (TIER 5+ ENTERPRISE)

### General Rules:
- âŒ **NEVER** use test/fake/placeholder data
- âœ… **ALWAYS** implement complete functionality
- âœ… **ALL** features must be production-ready
- âœ… Comprehensive error handling
- âœ… Loading states everywhere
- âœ… Dark mode support
- âœ… Mobile responsive
- âœ… i18n-ready (English/Spanish comments)

### Comment Standards:
```javascript
// ============================================================================
// SECTION NAME - MAJOR SECTION
// ============================================================================

// ===== SUBSECTION NAME =====

// Regular explanatory comments for complex logic
```

### File Organization:
```
src/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ hubs/          # All hub components (20 total after consolidation)
â”‚   â”œâ”€â”€ [standalone]/  # Standalone pages (minimal)
â”‚   â””â”€â”€ ...
â”œâ”€â”€ components/        # Reusable components
â”œâ”€â”€ contexts/          # React contexts (Auth, Theme, etc.)
â”œâ”€â”€ layout/            # ProtectedLayout.jsx, navConfig.js
â”œâ”€â”€ services/          # API services, Firebase functions
â””â”€â”€ utils/             # Utility functions
```

---

## ğŸ¯ NAVIGATION ARCHITECTURE

### Current Structure (Post-Reorganization)

**Total:** 20 Strategic Hubs (consolidated from 41)

#### Navigation Categories:
1. **Core Operations (7 hubs)**
   - Smart Dashboard
   - Clients & Pipeline Hub
   - Credit Reports & Analysis Hub
   - Dispute Management Hub
   - Communications Hub
   - Documents & Contracts Hub
   - Tasks & Productivity Hub

2. **Financial Management (2 hubs)**
   - Financial Operations Hub
   - Revenue & Analytics Hub

3. **Business Growth (4 hubs)**
   - Marketing & Campaigns Hub
   - Referrals & Partnerships Hub
   - Reviews & Reputation Hub
   - Client Success Hub

4. **Learning & Development (1 hub)**
   - Enterprise Learning Hub

5. **Technology & Systems (2 hubs)**
   - Mobile Application Hub
   - Settings & Administration Hub

6. **Specialized Services (4 hubs)**
   - Mortgage Readiness Hub
   - Rental Application Boost Hub
   - Credit Emergency Response Hub
   - Attorney Network Hub

### Navigation Configuration

**File:** `src/layout/navConfig.js` (1,684 lines)

**Key Exports:**
- `navigationItems` - Array of all nav items
- `ROLE_HIERARCHY` - Role permission levels (1-8)
- `ROLES` - Role definitions with metadata
- `hasPermission()` - Permission checker
- `isVisible()` - Visibility checker
- `filterNavigationByRole()` - Role-based filter
- `getMobileNavigation()` - Mobile-optimized nav

**Role Hierarchy:**
```
8 - masterAdmin (Christopher - full control)
7 - admin (Laurie, Jordan - administrative)
6 - manager (department oversight)
5 - user (standard employee)
4 - affiliate (partner access)
3 - client (customer access)
2 - prospect (potential customer)
1 - viewer (read-only)
```

### Hub Consolidation Mapping

**IMPORTANT:** Many standalone pages have been consolidated into hubs as tabs:

**Clients & Pipeline Hub** consolidates:
- Contacts.jsx â†’ Tab 2
- Pipeline.jsx â†’ Tab 3
- ContactDetailPage.jsx â†’ Tab 5
- ClientIntake.jsx â†’ Tab 4
- Segments.jsx â†’ Tab 7
- ImportCSV â†’ Tab 6

**Financial Operations Hub** consolidates:
- BillingHub, EnhancedBillingHub, BillingPaymentsHub
- PaymentIntegrationHub â†’ Tab 5
- CollectionsARHub â†’ Tab 6
- Invoices.jsx â†’ Tab 2

**Mobile Application Hub** consolidates:
- 8 separate mobile hubs into 1 hub with 12 tabs
- MobileScreenBuilder â†’ Tab 3
- PushNotificationManager â†’ Tab 5
- MobileAnalyticsDashboard â†’ Tab 7
- (Full mapping in DETAILED-HUB-SPECS.md)

**Reference:** See `SIDE-BY-SIDE-COMPARISON.md` for complete consolidation mappings.

---

## ğŸ¤– AI-FIRST ARCHITECTURE

### AI Requirements

**Every hub and major feature MUST include:**
- Predictive analytics
- Multi-model AI routing (Claude, GPT, Gemini)
- Learning and adaptation
- Personalization engines
- Optimization algorithms
- Real-time insights

### AI Feature Standards:
- âœ… Minimum 30-50 AI features per hub
- âœ… AI-powered recommendations
- âœ… Predictive scoring
- âœ… Automated insights
- âœ… Natural language processing
- âœ… Pattern recognition
- âœ… Anomaly detection

---

## ğŸ‘¥ ROLE-BASED ACCESS CONTROL

### Permission Patterns:

```javascript
// Check if user has permission for hub
import { hasPermission } from '@/layout/navConfig';

// In component
const { userProfile } = useAuth();
const userRole = userProfile?.role || 'user';

if (!hasPermission(userRole, 'admin')) {
  return <Unauthorized />;
}
```

### Role-Specific Features:

**MasterAdmin (8):** Everything
**Admin (7):** All features except system config
**Manager (6):** Team oversight, department data
**User (5):** Daily operations, assigned clients
**Affiliate (4):** Assigned clients only, limited features
**Client (3):** Personal data only
**Prospect (2):** Marketing materials, limited portal
**Viewer (1):** Read-only access

### Future Partner Roles (To Be Implemented):
- `taxPreparer: 4` - Tax preparation services
- `mortgageBroker: 4` - Mortgage assistance
- `realEstateAgent: 4` - Real estate services
- `attorney: 4` - Legal services

---

## ğŸ¨ UI/UX STANDARDS

### Design Principles:
1. **Dark Mode First** - All components support dark mode
2. **Mobile Responsive** - Works on all screen sizes
3. **Accordion Navigation** - Only one group expanded at a time
4. **Progressive Disclosure** - Don't show everything at once
5. **Loading States** - Show progress for all async operations
6. **Error Handling** - Graceful error messages
7. **Confirmation Dialogs** - For destructive actions
8. **Toast Notifications** - For success/error feedback

### Color Scheme:
- **Primary:** Blue (#3B82F6)
- **Success:** Green (#10B981)
- **Warning:** Yellow (#F59E0B)
- **Error:** Red (#EF4444)
- **Info:** Cyan (#06B6D4)
- **Purple:** AI features (#8B5CF6)

### Badge System:
- `AI` - AI-powered feature (purple)
- `ADMIN` - Admin-only feature (red)
- `PRO` - Premium feature (yellow)
- `NEW` - Recently added (green)
- `BETA` - In testing (orange)
- `URGENT` - Time-sensitive (red pulse)

---

## ğŸ”¥ FIREBASE INTEGRATION

### Firestore Collections:
```
users/              # User profiles, roles, permissions
clients/            # Client records
contacts/           # Contact/lead records
disputes/           # Dispute records
creditReports/      # Credit report data
invoices/           # Billing records
payments/           # Payment transactions
communications/     # Email/SMS logs
tasks/              # Task management
appointments/       # Calendar events
documents/          # Document metadata (files in Storage)
segments/           # Contact segments
workflows/          # Automation workflows
settings/           # System settings
```

### Real-time Listeners:
- Use `onSnapshot` for real-time updates
- Unsubscribe on component unmount
- Handle loading and error states

### Security Rules:
- Role-based access enforced in Firestore rules
- Users can only access data they're permitted to see
- Admin users have elevated access
- Clients can only see their own data

---

## ğŸ“¦ KEY INTEGRATIONS

### External Services:
1. **IDIQ API** - Credit report pulling (3-bureau)
2. **Stripe** - Payment processing
3. **PayPal** - Alternative payments
4. **ACH/Zelle** - Bank transfers
5. **Email Service** - Transactional emails
6. **SMS Service** - Text messaging
7. **Fax Service** - Dispute letter sending
8. **Google Calendar** - Calendar sync
9. **Outlook** - Calendar sync

### API Keys & Environment:
- Store in `.env` file (never commit)
- Access via `import.meta.env.VITE_*`
- Different keys for dev/staging/production

---

## ğŸš€ DEPLOYMENT

### Environments:
- **Development:** Local (npm run dev)
- **Staging:** Firebase Hosting (staging)
- **Production:** https://myclevercrm.com

### Git Workflow:
- **Main branch:** Production-ready code
- **Feature branches:** `claude/feature-name-sessionId`
- **Always push to feature branch first**
- **Create PR for Christopher's review**
- **Merge to main after approval**

---

## ğŸ“š IMPORTANT DOCUMENTS

### Reference Files:
1. **NAVIGATION-ANALYSIS-REPORT.md** - Current state analysis
2. **PROPOSED-NAVIGATION-STRUCTURE.md** - New 20-hub structure
3. **SIDE-BY-SIDE-COMPARISON.md** - Before/after comparison
4. **IMPLEMENTATION-ROADMAP.md** - 6-week implementation plan
5. **DETAILED-HUB-SPECS.md** - Complete hub specifications

### Key Decisions Made:
- âœ… Consolidate 41 hubs â†’ 20 hubs (51% reduction)
- âœ… Pipeline as full-featured tab in Clients Hub (Option A)
- âœ… Use full 3,682-line Calendar.jsx in Tasks & Productivity Hub
- âœ… Keep 7 specialized service hubs separate (not consolidated)
- âœ… Current 8-role hierarchy is sufficient
- âœ… Implement "My Power Page" feature in Smart Dashboard Tab 7
- âœ… Use Sonnet 4.5 for implementation (95% of work)

---

## âš ï¸ CRITICAL CONSTRAINTS

### DO NOT:
- âŒ Remove any features during consolidation
- âŒ Use test/fake/placeholder data
- âŒ Create incomplete implementations
- âŒ Skip error handling
- âŒ Ignore loading states
- âŒ Break existing functionality
- âŒ Change file names without updating all references
- âŒ Commit directly to main branch
- âŒ Push to wrong branch

### ALWAYS:
- âœ… Preserve 100% of features during consolidation
- âœ… Test thoroughly before committing
- âœ… Update navConfig.js when changing navigation
- âœ… Update App.jsx routes when needed
- âœ… Implement dark mode support
- âœ… Make mobile-responsive
- âœ… Add role-based access control
- âœ… Include AI features
- âœ… Write comprehensive comments
- âœ… Commit with descriptive messages
- âœ… Push to feature branch (claude/*)

---

## ğŸ¯ IMPLEMENTATION PRIORITIES

### Phase 1 (Week 1): Critical Consolidations
1. Mobile Application Hub (8 hubs â†’ 1)
2. Financial Operations Hub (6 hubs â†’ 1)
3. Clients & Pipeline Hub (6 items â†’ 1)
4. Communications Hub (7 items â†’ 1)
5. Referrals & Partnerships Hub (5 hubs â†’ 1)

### Phase 2 (Week 2-3): High-Priority Merges
6. Enterprise Learning Hub (8+ items â†’ 1)
7. Documents & Contracts Hub (12 items â†’ 1)
8. Marketing & Campaigns Hub (6 hubs â†’ 1)
9. Dispute Management Hub (4 items â†’ 1)
10. Credit Reports & Analysis Hub (5 items â†’ 1)
11. Tasks & Productivity Hub (6 items â†’ 1)

### Phase 3 (Week 4): Medium-Priority
12. Revenue & Analytics Hub (3 hubs â†’ 1)
13. Settings & Administration Hub (3 hubs â†’ 1)
14. Client Success Hub (3 hubs â†’ 1)

### Phase 4 (Week 5): Testing & Validation
- Comprehensive testing
- User acceptance testing
- Performance optimization
- Bug fixes

### Phase 5 (Week 6): Documentation & Training
- User documentation
- Video tutorials
- Team training
- Launch preparation

---

## ğŸ“ CHRISTOPHER'S PREFERENCES

### Communication Style:
- Detailed explanations preferred
- Wants to understand "why" not just "what"
- Values best practices and industry standards
- Open to suggestions and alternatives
- Asks clarifying questions before approving

### Work Style:
- Methodical, phased approach
- Test after each change
- Commit frequently
- Review before proceeding
- Appreciates summaries of changes made

### Learning Mode:
- Self-identified "huge newbie" but learning fast
- Asks intelligent questions
- Wants to work smarter
- Values education alongside implementation
- Appreciates explanations of technical concepts

---

## ğŸ”§ DEVELOPMENT COMMANDS

### Local Development:
```bash
npm run dev          # Start dev server
npm run build        # Build for production
npm run preview      # Preview production build
npm run lint         # Run ESLint
npm test            # Run tests
```

### Git Commands:
```bash
git status                                      # Check status
git add .                                       # Stage all changes
git commit -m "feat: description"               # Commit
git push -u origin claude/feature-name-sessionId # Push to feature branch
```

### Firebase Commands:
```bash
firebase deploy              # Deploy to production
firebase deploy --only hosting  # Deploy hosting only
firebase deploy --only functions # Deploy functions only
```

---

## ğŸ“ SUPPORT & QUESTIONS

### When Implementing:
1. **Reference this file first** for standards and patterns
2. **Check DETAILED-HUB-SPECS.md** for hub specifications
3. **Review IMPLEMENTATION-ROADMAP.md** for phasing
4. **Consult SIDE-BY-SIDE-COMPARISON.md** for consolidation mappings
5. **Ask Christopher** if anything is unclear

### If Uncertain:
- âœ… Ask clarifying questions
- âœ… Propose alternatives with pros/cons
- âœ… Explain trade-offs
- âœ… Get approval before major changes
- âŒ Don't make assumptions
- âŒ Don't deviate from patterns without discussion

---

## âœ… FINAL REMINDERS

**For Claude Code:**
- This is a real, production system serving real customers
- Code quality matters - this is Tier 5+ Enterprise standard
- Preserve all features during consolidation
- Test thoroughly, commit frequently
- Follow the patterns established in the codebase
- When in doubt, ask Christopher

**For Christopher:**
- This file is your permanent context for Claude
- Update this file as new decisions are made
- Reference this file when working with new Claude sessions
- Share this file when onboarding new developers

---

**Last Updated:** December 3, 2025
**Version:** 1.0
**Status:** Active - Reference for all SpeedyCRM development

---

*End of Claude Context Document*
